import{_ as T,D as b,r as N,o as z,E,F as L,v as d,A as p,G as O,H as r,y as i,z as a,B as h,I as U,x as u,J as f,C as W,K as $,L as M}from"./BJj5iVno.js";import{u as j}from"./CZeNUcEN.js";import{_ as F}from"./DFBB7RuB.js";import P from"./DT-Mdv2w.js";import Y from"./xeNpmpzx.js";import A from"./xqgZ370Q.js";import G from"./4qzzeDDD.js";import"./C0of1JiW.js";import"./DZPj5ay0.js";import"./DL0saGXe.js";import"./TJr1GkMb.js";import"./CR4VZM3-.js";import"./YDtsCE2J.js";import"./DYHpv7mV.js";const H={class:"container"},J={key:1,class:"container"},K={style:{marginBottom:0}},R={class:"card-container"},q={style:{margin:"0"}},Q={key:0,style:{"text-align":"center"}},X={key:0},Z={key:1},ee={style:{"text-align":"center"}},te={key:0},se={key:1},oe={class:"p-d-flex p-ai-center"},ne={style:{margin:"0"}},ie={style:{whiteSpace:"break-spaces",marginTop:"0.5rem"},class:"p-card-subtitle"},re={key:0,style:{"margin-top":"8rem"}},le=["href"],ae={__name:"home",setup(ce){const V=E(),{initTermData:C}=j(),D=b("updateMenubar"),I=b("routerLoading",()=>!1),o=b("courseSelectionSchedule",()=>{}),m=N(1),k=b("windowWidth",()=>window.innerWidth),S=N([{breakpoint:"100000px",numVisible:3,numScroll:1},{breakpoint:"745px",numVisible:1,numScroll:1}]);function B(){const s=new Date,t=s.getFullYear()-1911,l=s.getMonth()+1,n=s.getDate();for(const[v,c]of o.value.schedule.entries())if(c.date&&c.date.date){const[e,_,y]=c.date.date.split("/").map(Number);if(t>e||t===e&&l>_||t===e&&l===_&&n>y)continue;return v}else if(c.end&&c.end.date){const[e,_]=c.end.date.split("/").map(Number);if(l>e||l===e&&n>_)continue;return v}}function w(s,t,l){return Math.min(Math.max(s,t),l)}function g(s){m.value=k.value<=745?w(s,0,o.value.schedule.length-1):w(s,0,o.value.schedule.length-3)}function x(){var t,l;const s=B();if(s!==void 0){k.value>745?g(s-1):g(s);const n=o.value.schedule[s];U({title:"選課時程",description:`查看選課時程並快速搜尋課程。${n.info?`${n.info} ${((t=n==null?void 0:n.date)==null?void 0:t.date)||((l=n==null?void 0:n.start)==null?void 0:l.date)||""}`:""}`,keywords:"師大課程查詢, 師大課程, 師大選課, NTNU Course Search"})}}return z(async()=>{var s;(s=o==null?void 0:o.value)!=null&&s.schedule?x():await fetch("/data/schedule.json").then(t=>t.json()).then(t=>{o.value=t,x()}).catch(t=>{console.error("Error fetching course selection schedule:",t)}),await C(V),D.value()}),L(()=>{var s,t;return(t=(s=o==null?void 0:o.value)==null?void 0:s.schedule)==null?void 0:t.length},s=>{s>0&&x()}),(s,t)=>{var l,n,v,c;return u(),d("div",H,[p(r(F)),r(I)?(u(),O(r(P),{key:0,style:{"margin-top":"30vh","margin-bottom":"20vh"}})):(u(),d("div",J,[i("h3",K,a((l=r(o))==null?void 0:l.year)+" 學年度 第 "+a((n=r(o))==null?void 0:n.term)+" 學期 ",1),t[4]||(t[4]=i("h1",{class:"center"},"選課時程",-1)),p(r(G),{value:(v=r(o))==null?void 0:v.schedule,page:m.value,numVisible:r(k)<=745?1:3,numScroll:1,showNavigators:!1,showIndicators:!1,responsiveOptions:S.value,"onUpdate:page":t[0]||(t[0]=e=>m.value=e)},{item:h(({data:e,_})=>[i("div",R,[p(r(Y),{class:"schedule-card"},{title:h(()=>[i("h3",q,a(e==null?void 0:e.info),1)]),subtitle:h(()=>[e!=null&&e.date?(u(),d("div",Q,[e.date.time?(u(),d("span",X,a(e.date.time),1)):f("",!0),i("span",{class:"card-title-date",style:$({color:e.color})},a(e.date.date),5)])):f("",!0),e.start?(u(),d("div",Z,[i("div",ee,[e.start.time?(u(),d("span",te,a(e.start.time),1)):f("",!0),i("span",{class:"card-title-date",style:$({color:e.color})},a(e.start.date)+"-"+a(e.end.date),5),e.end.time?(u(),d("span",se,a(e.end.time),1)):f("",!0)])])):f("",!0)]),content:h(()=>[p(r(A),{value:e==null?void 0:e.steps,align:"left",class:"p-mt-3"},{content:h(({item:y})=>[i("div",oe,[i("div",null,[i("h4",ne,a(y.title),1),i("div",ie,a(y.description),1)])])]),_:2},1032,["value"])]),footer:h(()=>[e!=null&&e.moreInfo?(u(),d("div",re,[i("a",{href:e.moreInfoUrl,target:"_blank",style:{color:"inherit","text-decoration":"none",cursor:"pointer"}},[t[3]||(t[3]=i("i",{class:"pi pi-external-link",style:{"margin-right":"1rem"}},null,-1)),W(" "+a(e.moreInfo),1)],8,le)])):f("",!0)]),_:2},1024)])]),_:1},8,["value","page","numVisible","responsiveOptions"]),i("div",null,[p(r(M),{icon:"pi pi-angle-left",variant:"text",rounded:"",size:"large",onClick:t[1]||(t[1]=e=>g(m.value-1)),disabled:m.value<=0,style:{"margin-right":"0.5rem"}},null,8,["disabled"]),p(r(M),{icon:"pi pi-angle-right",variant:"text",rounded:"",size:"large",onClick:t[2]||(t[2]=e=>g(m.value+1)),disabled:m.value>=((c=r(o))==null?void 0:c.schedule.length)-3},null,8,["disabled"])])]))])}}},Ne=T(ae,[["__scopeId","data-v-42e5d6dc"]]);export{Ne as default};
