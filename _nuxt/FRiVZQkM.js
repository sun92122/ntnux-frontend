import{bY as q,_ as Q,o as J,D as r,r as j,P as y,v as g,x as i,A as v,y as s,B as _,G as M,H as e,aV as X,W as ee,U as C,L as w,K as B,M as S,bZ as te,N as H,C as L,z,u as V,ay as le}from"./BJj5iVno.js";import{u as ae}from"./CZeNUcEN.js";import{u as se}from"./C0of1JiW.js";import oe from"./DRnM84Q5.js";import G from"./Bu-jN-hg.js";const ne=q("/favicon.svg"),ue={class:"menubar-end"},re={__name:"DefaultHeader",setup(A){J(()=>{c.value=Z});const{terms:k,currentTerm:o}=ae(),{selectedCourses:D,selectedRows:p,windowWidth:b}=se(),c=r("updateMenubar"),R=r("loadTermData"),T=r("deptLists",()=>({})),f=r("deptList",()=>[]),I=r("isShowSchedule",()=>!1),F=r("blocked",()=>!1),U=r("darkModeFlag",()=>!1),n=r("darkMode",()=>!1),N=async()=>{F.value=!0,setTimeout(()=>{U.value=n.value,document.documentElement.classList.toggle("dark-mode-toggle",n.value)},100),await te().then(()=>{setTimeout(()=>{F.value=!1},800)})},W=j({width:"3.5rem",height:"2rem",handle:{size:"1.5rem",checked:{color:"#FFFFFF",background:"#000000",hover:{color:"#FFFFFF",background:"#000000"}}},checked:{background:"#FFFFFF",hover:{background:"#FFFFFF"}}}),E=j([{label:"課表",icon:"pi pi-fw pi-calendar",command:()=>{I.value=!0}},{label:"選擇學期",icon:"pi pi-fw pi-book",items:[]}]);function Z(){const m=E.value[1];if((!f.value||f.value.length<1)&&(f.value=O(r("rowData").value),T.value[o.value]=f.value),m.items=k.value.map(t=>({label:t,items:[1,2,3].map(l=>({label:["1","2","暑期"][l-1],command:()=>{o.value=`${t}-${l}`,p.value=D.value[o.value]||{},D.value[o.value]=p.value,f.value=T.value[o.value]||O(r("rowData").value),T.value[o.value]=f.value,R.value(),m.label=b.value>380?`學期：${t}-${["1","2","暑期"][l-1]}`:`${t}-${["1","2","暑期"][l-1]}`}}))})),!o.value){m.label="選擇學期";return}m.label=b.value>380?`學期：${o.value}`:o.value}function O(m){const t={"":"其他",E:"教育學院",L:"文學院",S:"理學院",T:"藝術學院",H:"科技學院",A:"運休學院",I:"國社學院",M:"音樂學院",O:"管理學院",C:"產創學院",Z:"學程"},l={};return m.forEach($=>{const a=$.dept_code,d=`${a} ${$.dept_chiabbr}`;if(!/^[A-Za-z]/.test(a)||a.length!==1&&a.length!==4){l[""]||(l[""]={}),l[""][a]=d;return}if(l[a[0]]||(l[a[0]]={}),a.length===1)l[a[0]][a]=d;else{const h=a.slice(2);l[a[0]][h]||(l[a[0]][h]={}),l[a[0]][h][a]=d}}),Object.entries(t).map(([$,a],d)=>({key:d,label:a,data:{value:null,matchMode:y.EQUALS},children:Object.entries(l[$]||{}).map(([h,u],x)=>typeof u=="string"?{key:`${d}-${x}`,label:u,data:{value:h,matchMode:y.EQUALS}}:Object.keys(u).length===1?{key:`${d}-${x}`,label:u[Object.keys(u)[0]],data:{value:Object.keys(u)[0],matchMode:y.EQUALS}}:{key:`${d}-${x}`,label:`${h.slice(0)} ${u[Object.keys(u)[0]].slice(5,u[Object.keys(u)[0]].indexOf("（"))}`,data:{value:h.slice(0),matchMode:y.ENDS_WITH},children:Object.entries(u).map(([K,P],Y)=>({key:`${d}-${x}-${Y}`,label:P,data:{value:K,matchMode:y.EQUALS}}))})}))}return(m,t)=>(i(),g(S,null,[v(e(oe),{model:e(E),sticky:!0,breakpoint:"340px"},{start:_(()=>[v(e(w),{class:"p-button-rounded p-button-secondary me-2",as:"router-link",to:"/home","aria-label":"Home"},{icon:_(()=>t[2]||(t[2]=[s("img",{src:ne,alt:"Home Icon",width:"24",height:"24"},null,-1)])),_:1})]),end:_(()=>[s("div",ue,[e(b)>600?(i(),M(e(X),{key:0,modelValue:e(n),"onUpdate:modelValue":t[0]||(t[0]=l=>ee(n)?n.value=l:null),class:"me-2",onChange:N,"aria-label":"Toggle Dark Mode",dt:e(W)},{handle:_(()=>[s("i",{class:C({"pi pi-sun":!e(n),"pi pi-moon":e(n)})},null,2)]),_:1},8,["modelValue","dt"])):(i(),M(e(w),{key:1,icon:e(n)?"pi pi-moon":"pi pi-sun",severity:e(n)?"secondary":"primary",class:"p-button-rounded p-button-secondary me-2",onClick:t[1]||(t[1]=()=>{n.value=!e(n),N()}),"aria-label":"Toggle Dark Mode"},null,8,["icon","severity"])),v(e(w),{icon:"pi pi-github",class:"p-button-rounded p-button-secondary",as:"a",href:"https://github.com/sun92122/NTNUx",target:"_blank","aria-label":"Github"})])]),_:1},8,["model"]),s("div",{class:C(["sun sun-logo",{animate:e(U)}]),style:B(e(F)?{}:{opacity:0})},t[3]||(t[3]=[s("i",{class:"pi pi-sun switch-icon"},null,-1)]),6),s("div",{class:C(["moon moon-logo",{animate:e(U)}]),style:B(e(F)?{}:{opacity:0})},t[4]||(t[4]=[s("i",{class:"pi pi-moon switch-icon"},null,-1)]),6)],64))}},ie=Q(re,[["__scopeId","data-v-e74ac60c"]]),ce={class:"footer"},de={class:"footer-content"},pe=["href"],be={__name:"DefaultFooter",setup(A){const k=r("isShowSchedule",()=>!1),o=[{label:"更多功能",icon:"pi pi-fw pi-cog",items:[{label:"顯示課表",command:()=>{k.value=!0}},{label:"進階搜尋",command:()=>{V().push("/?m=advanced")}},{label:"顯示收藏課程",command:()=>{V().push("/favorite")}},{label:"課程討論區（GitHub）",url:"https://github.com/sun92122/NTNUx/discussions/categories/course-%E8%AA%B2%E7%A8%8B"}]},{label:"關於 NTNUx",icon:"pi pi-fw pi-info-circle",items:[{label:"GitHub",url:"https://github.com/sun92122/NTNUx"},{label:"Bug 回報",url:"https://github.com/sun92122/NTNUx/issues"},{label:"NTNUx 討論區",url:"https://github.com/sun92122/NTNUx/discussions"}]},{label:"實用連結",icon:"pi pi-fw pi-link",items:[{label:"師大課程資訊",url:"https://courseap2.itc.ntnu.edu.tw/acadmOpenCourse/index.jsp"},{label:"師大選課系統",url:`https://cos${Math.floor(Math.random()*4)+1}s.ntnu.edu.tw/AasEnrollStudent`},{label:"行政資訊入口",url:"https://iportal2.ntnu.edu.tw/ntnu/"},{label:"年度行事曆",url:"https://www.aa.ntnu.edu.tw/zh_tw/Calender"},{label:"選課沒地雷（FB）",url:"https://www.facebook.com/groups/143704482352660/"}]}];return(D,p)=>(i(),g("footer",ce,[v(e(G)),s("div",de,[(i(),g(S,null,H(o,b=>s("div",{class:"footer-content-col",key:b.label},[s("h4",null,z(b.label),1),(i(!0),g(S,null,H(b.items,c=>(i(),g("div",{key:c.label,style:{padding:"2px 0"}},[c.url?(i(),M(e(w),{key:0,label:c.label,class:"p-button-text p-button-secondary",asChild:""},{default:_(()=>[s("a",{href:c.url,target:"_blank",style:{"text-decoration":"none",color:"inherit"}},z(c.label),9,pe),p[0]||(p[0]=s("i",{class:"pi pi-external-link",style:{"font-size":"0.75rem","margin-left":"0.5rem"}},null,-1))]),_:2},1032,["label"])):(i(),M(e(w),{key:1,label:c.label,class:"p-button-text p-button-secondary",onClick:c.command,style:{padding:"0",border:"none"}},null,8,["label","onClick"]))]))),128))])),64))]),v(e(G),{class:"footer-content"}),p[1]||(p[1]=s("span",{class:"footer-copyright"},[L(" © 2025 "),s("a",{href:"https://github.com/sun92122/NTNUx",target:"_blank",style:{color:"var(--p-text-secondary-color)"}}," NTNUx. "),s("br"),L(" 所有課程資料為國立臺灣師範大學所有，僅供學術研究與個人使用 "),s("br"),L(" 資料非實時更新，請以學校公告為準 ")],-1))]))}},me=Q(be,[["__scopeId","data-v-0449bc30"]]),ye={__name:"default",setup(A){return(k,o)=>(i(),g(S,null,[v(e(ie)),le(k.$slots,"default"),v(e(me))],64))}};export{ye as default};
